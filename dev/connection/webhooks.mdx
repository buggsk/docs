---
title: 'Webhooks'
description: ''
---

The webhook data exchange format is used in the Orchestro network for Orders/Manifest, Tracking and Errors.  All manifests and events inbound to Orchestro are transmitted via webhooks.  Data integrity and security is ensured by HMAC.  
 
All outgoing webhook subscriptions are distributed via Amazon SNS. For the webhook endpoint, data is delivered without API authorization via POST to the URL supplied by the carrier. It is advised that carriers configure their endpoint with a portion of the URL randomly generated and treat the entire URL with the same level of confidentiality as a password. 
 
- **Subscription:**
SNS requires an HTTPS endpoint to authorize a subscription on first initialization. The following is the procedure: 
Initialize subscription with carrier specified endpoint. 
SNS transmits a JSON object containing a subscribe URL string. 
Authorize the subscription with the subscribe URL string by initiating a GET on the URL. 
SNS Queue is now ready for use. 
Sample object for subscription step 2 

```json
# Truncated for brevity 
{ 
  "Type": "SubscriptionConfirmation",   
  "Message": "You have chosen to subscribe to the topic XXX.\nTo confirm the subscription, visit the SubscribeURL included in this message.", 
  "SubscribeURL": "https://sns.us-east-1.amazonaws.com/?Action=ConfirmSubscription&TopicArn=arn:aws:sns:us-east-1:505753670778&Token=2336412f37fb687f5d51e6e2425ba1f250507111f1dea5a045a6782d5e9fe52289cec3a0e544b8cab934a55a630b96a6a09437088abd095390988d4b77faf13af8d0e4e35852dacf5207dc25824dc2af9878ee8f15a2ea17204b7478e56a1d2dabed727783dee9034bfcddacbc562eeb71cbc88ddf5433aecb501c96e0084965", 
} 

```

- **Recommendation:**
A practical approach to capture the data involves dumping the contents of the POST request into a logfile, then reading the subscription URL from this logfile. Since the subscription confirmation happens only once, this method provides a straightforward way to set up the subscription. 
 
<Note> Once the queue is initialized, the data will flow immediately when a new event is available. Undeliverable events will be retried approximately 4 times using an exponential backoff, after which the data will be transmitted to an error queue.</Note>

## Standard Webhook Specification

This section outlines detailed information about the platform standards and formats for webhook submission.  

### Webhook Headers 
Each webhook that is sent to Orchestro should be Content-Type application/json headers. The HMAC authentication hash should be transmitted in the headers with the name Orchestro-Auth. 
 
### Account Number and Carrier Code 
The account number is part of the Orchestro system's carrier profile. This value will be generated by Orchestro and provided via administration portal or during onboarding. It is a short, unique, all-capital code.  
Carrier code is a short unique code that is specific to a carrier. Packages traveling through the system are tagged with the anticipated carriers using carrier codes. Fields for the origin and destination may be included in this. 

### Service Types and Service Attributes 
See Appendix B and Appendix C for the complete list of supported codes. 

###Dates 
All dates should be sent in ISO 8601 format with time zone offset or Zulu time: 
2024-02-20T23:38:22+07:00 
2024-02-20T16:38:22Z 
A timestamp with no offset is not acceptable. 

### HMAC Specification 
To secure data with HMAC, the carrier should create a secret and share it with Orchestro in a secure manner.  During transmission time the HMAC should be computed on the final UTF-8 encoded and serialized payload. 
For the HMAC computation please use an HMAC library with the following parameters: 
- SHA256  
- Hex encoded output string 
All major programming languages include HMAC library functions, please contact Orchestro at carrier.integration@orchestro.ai if assistance required in finding a suitable library. 

### Webhook Endpoints 
Upon signup, Orchestro will provide the carrier with webhook endpoints for Manifest and Event submissions. A HTTP 200 return indicates the webhook was successfully received.  Any other return value indicates that the data transmission was incomplete and must be retried. 
 


## Standard Manifest Format 

**Description:**
Carriers need to transmit this object to provide corresponding parcel data to Orchestro for delivery. A single manifest can provide the data for a single parcel or multiple parcels.

### Root Object

<ParamField body="shipmentDate" type="date" required>
Shipment Date
</ParamField>

<ParamField body="accountNumber" type="string" required>
Account provided by Orchestro
</ParamField>

<ParamField body="accountType" type="string">
Account Type (ex: Shipper / Carrier / RSE)
</ParamField>


<ParamField body="parcels" type="array of object" required>
Parcel Object
</ParamField>

### Parcel Object
<ParamField body="trackingid" type="string" required>

ID which is generated by Carrier OR Shipper OR Orchestro. 

</ParamField>

<ParamField body="orchestroTrackingid" type="string">
ID generated by Orchestro, otherwise empty.
</ParamField>


<ParamField body="shipDate" type="date">
Ship Date
</ParamField>


<ParamField body="expectedDate" type="date" required>
Expected Date
</ParamField>


<ParamField body="containerTrackingid" type="string">
ID of a shipping container containing this parcel 
</ParamField>



<ParamField body="serviceType" type="string" required>

Service Type. The service t codes available in the appendix. 
</ParamField>


<ParamField body="originCode" type="string">
Origin Carrier Code
</ParamField>


<ParamField body="originCarrier" type="string">
Origin Carrier Name
</ParamField>


<ParamField body="zone" type="number">
Zone
</ParamField>


<ParamField body="pickupType" type="string">
Reserved for future use
</ParamField>


<ParamField body="shipFrom" type="object">
Address Object
</ParamField>


<ParamField body="shipTo" type="object" required>
Address Object
</ParamField>


<ParamField body="standardReturn" type="boolean">
If the package standard return is true then return address is required
</ParamField>


<ParamField body="returnAddress" type="object">
Address Object
</ParamField>


<ParamField body="serviceAttributes" type="array of string">
List of service attributes. The service attributes codes available in the appendix
</ParamField>


<ParamField body="packType" type="string">
Reserved for future use
</ParamField>


<ParamField body="reference" type="string">
Reference field for customer use 
</ParamField>


<ParamField body="reference2" type="string">
Reference field for customer use 
</ParamField>


<ParamField body="reference3" type="string">
Reference field for customer use 
</ParamField>


<ParamField body="specialInstructions" type="string">
Extra Delivery instructions
</ParamField>


<ParamField body="weight" type="object">
Weight Object
</ParamField>


<ParamField body="dimensions" type="object">
Dimension Object
</ParamField>

### Address Object

<ParamField body="company" type="string">
Company Name
</ParamField>


<ParamField body="name" type="string" required>
Name
</ParamField>

<ParamField body="address1" type="string" required>
Address Line 1
</ParamField>


<ParamField body="address2" type="string">
Address Line 2
</ParamField>


<ParamField body="city" type="string" required>
Name of City
</ParamField>


<ParamField body="state" type="string" required>

State Code ( 2 digit) eg : CA 

</ParamField>


<ParamField body="zip" type="string" required>
Zip Code
</ParamField>


<ParamField body="country" type="string" required>
Country Code
</ParamField>


<ParamField body="phone" type="string">
Phone Number
</ParamField>


<ParamField body="email" type="string">
Email ID
</ParamField>


<ParamField body="addressType" type="string">
B, R (Business | Residential) 
</ParamField>


### Weight Object

<ParamField body="value" type="number" required>
Value
</ParamField>


<ParamField body="unit" type="string" required>
Unit
</ParamField>



### Dimension Object

<ParamField body="unit" type="string" required>
Unit
</ParamField>


<ParamField body="length" type="number" required>
length
</ParamField>



<ParamField body="width" type="number" required>
Width
</ParamField>


<ParamField body="height" type="number" required>
Height
</ParamField>

#### Sample JSON
```json
{ 
	"shipmentDate": "2024-02-02T03:55:44-05:00", 
	"accountNumber": "TEST_ACCOUNT_1", 
	"accountType": "", 
	"parcels": [ 
    	{ 
        	"trackingId": "Test_Tracking_Id", 
        	"shipDate": "2024-02-02T03:55:44-05:00", 
        	"expectedDate": "2024-02-06T03:55:44-05:00", 
        	"account": "TEST_ACCOUNT_1", 
        	"serviceType": "G", 
        	"originCarrier": "TEST", 
        	"zone": "6", 
        	"originCode": "TEST", 
        	"pickupType": "Pickup", 
        	"shipFrom": { 
            	"company": "", 
            	"name": "Test Name", 
            	"address1": "306 COUNTY ROAD 655", 
            	"address2": "", 
            	"city": "BRAZORIA", 
            	"state": "TX", 
            	"zip": "77422", 
            	"country": "US", 
            	"phone": "", 
            	"email": "", 
            	"addressType": "B" 
        	}, 
        	"shipTo": { 
            	"company": "", 
            	"name": "Test Name", 
            	"address1": "5413 N LOCUST ST", 
            	"address2": "", 
            	"city": "Alpharetta", 
            	"state": "GA", 
            	"zip": "60600", 
            	"country": "US", 
            	"phone": "", 
            	"email": "", 
            	"addressType": "B" 
        	}, 
        	"standardReturn": true, 
        	"returnAddress": { 
            	"name": "", 
            	"company": "Test Name", 
            	"address1": "306 COUNTY ROAD 655", 
            	"address2": "", 
            	"city": "BRAZORIA", 
            	"state": "TX", 
            	"zip": "60600", 
           	"country": "US", 
            	"phone": "" 
        	}, 
        	"serviceAttributes": ["AD_SIGN", “SAT_DEL”], 
        	"packType": "P", 
        	"weight": { 
            	"value": 3, 
            	"unit": "lb" 
        	}, 
        	"dimensions": { 
            	"unit": "inch", 
            	"length": 3, 
            	"width": 12, 
            	"height": 3 
        	} 
    	} 
	] 
} 


```

## Standard Event Format 

**Description:**
Carriers need to submit tracking events to the Orchestro network using the format below. Status codes can be provided in the carrier’s native code specification. Orchestro automatically translates these codes to the network status code upon event ingestion

### Root Object

<ParamField body="trackingid" type="string" required>
Barcode attached to the parcel 
</ParamField>


<ParamField body="containerTrackingid" type="string">
ID when event applies to a container
</ParamField>



<ParamField body="accountNumber" type="string" required>
Account number provided by Orchestro 
</ParamField>



<ParamField body="event" type="object" required>
Event Object
</ParamField>



<ParamField body="phyAttributesUpdate" type="object">
Attributes update object
</ParamField>



### Atrributes Update Object
<ParamField body="updates" type="object array">
Dimension Update Object 
</ParamField>

### Dimension Update Object

<ParamField body="attribute" type="string" required>
One of length, width, height, weight 
</ParamField>

<ParamField body="newValue" type="number" required>
New measured value
</ParamField>


<ParamField body="unit" type="string" required>
Unit for measured value, usually in or lb 
</ParamField>

### Event Object

<ParamField body="comments" type="string">
Comments
</ParamField>


<ParamField body="status" type="string" required>
Event Status tracking in carrier’s preferred format 
</ParamField>


<ParamField body="alternateStatusCode" type="string">
Alternate Status Code 
</ParamField>


<ParamField body="deliverySignature" type="string">
Delivery Signature
</ParamField>


<ParamField body="timestamp" type="timestamp">
Timestamp
</ParamField>


<ParamField body="timezone" type="string">
Timezone
</ParamField>


<ParamField body="latitude" type="double" required>
Coordinates of scan event 
</ParamField>


<ParamField body="longitude" type="string" required>
Coordinates of scan event 
</ParamField>


<ParamField body="city" type="string">
City
</ParamField>


<ParamField body="state" type="string">
State Code ( 2 digit) eg : CA
</ParamField>


<ParamField body="zip" type="string">
Zip Code
</ParamField>


<ParamField body="pod" type="object">
POD Object
</ParamField>


<ParamField body="carrierTrackCode" type="string">
Contains the original status code provided by the source carrier when Orchestro converts the carrier status code to the network code 
</ParamField>


<ParamField body="modifiers" type="string array">
Orchestro modifier codes that add additional information about the status code
</ParamField>


### POD Object

<ParamField body="otherDeliveryInfo" type="string">
Additional notes about delivery 
</ParamField>


<ParamField body="signatureName" type="string">
Text of consignee name 
</ParamField>


<ParamField body="images" type="array of object">
Image object
</ParamField>

### Image Object

<ParamField body="imageType" type="string" required>
Either POD or SIGNATURE
</ParamField>

<ParamField body="imageUrl" type="string" required>
Url where image can be downloaded
</ParamField>

<ParamField body="expiration" type="date">

Image expiration if known 
</ParamField>

### Example One

```json
{
  "trackingId": "2356",
  "accountNumber": "TEST_ACCOUNT_1",
  "event": {
    "comments": "Left at front door",
    "status": "D",
    "networkStatusCode": "DDEL",
    "alternateStatusCode": "",
    "deliverySignature": "Yes",
    "latitude": 38.896765,
    "longitude": -77.036211,
    "timestamp": "2014-10-29T06:34:00",
    "timezone": "CST",
    "city": "HARKER HEIGHTS",
    "state": "TX",
    "zip": "76548"
  }
}


```

#### Example Two
```json
{
  "trackingId": "2357",
  "accountNumber": "TEST_ACCOUNT_1",
  "event": {
    "status": "D",
    "networkStatusCode": "DDEL",
    "deliverySignature": "Yes",
    "timestamp": "2014-10-29T06:34:00",
    "latitude": 38.896765,
    "longitude": -77.036211,
    "timezone": "CST",
    "city": "HARKER HEIGHTS",
    "state": "TX",
    "zip": "76548",
    "pod": {
      "signatureName": "Smith"
    }
  }
}
```

#### Example Three
```json
{ 
"trackingId": "2357", 
"accountNumber": "TEST_ACCOUNT_1", 
"phyAttributesUpdate": { 
  "updates": [ 
	{ 
  	"attribute": "length", 
  	"newValue": 12.5, 
      	"unit": "lb", 
	} 
  ] 
} 
} 
```











